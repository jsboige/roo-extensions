{
  "schedules": [
    {
      "id": "TEMPLATE_ID",
      "name": "Claude-Code Assistant",
      "mode": "orchestrator-simple",
      "taskInstructions": "Tu es lance par le planificateur automatique. Suis ce workflow strictement.\n\n### WORKFLOW EN 6 ETAPES\n\n**Etape 1 : Lire l'INTERCOM**\n- Ouvre `.claude/local/INTERCOM-${MACHINE_NAME}.md`\n- Lis les 5 derniers messages\n- Cherche les messages de type [SCHEDULED], [TASK] ou [URGENT] de Claude Code\n- Si message [URGENT] : escalader vers orchestrator-complex immediatement\n- Evaluer la difficulte de chaque tache : SIMPLE (1 action), MOYEN (2-4 actions), COMPLEXE (5+ actions ou dependances)\n\n**Etape 2 : Verifier l'etat du workspace**\n- Deleguer a code-simple via `new_task` : \"Executer `git status` et rapporter l'etat du workspace\"\n- Si dirty : NE PAS commiter. Signaler dans le rapport.\n\n**Etape 3 : Executer les taches par delegation**\n- REGLE ABSOLUE : NE JAMAIS faire le travail toi-meme. TOUJOURS deleguer via `new_task`.\n- Pour chaque tache [TASK] trouvee dans l'INTERCOM :\n  a. SIMPLE (1 action isolee) : deleguer a code-simple ou debug-simple via new_task\n  b. MOYEN (2-4 actions) : deleguer chaque action separement a code-simple\n  c. COMPLEXE (5+ actions, dependances entre elles) : escalader vers orchestrator-complex via new_task avec le contexte complet\n  d. URGENT : escalader vers orchestrator-complex immediatement\n- GESTION DES ECHECS :\n  1. Si une sous-tache echoue : analyser le resume d'erreur retourne\n  2. Si erreur simple (fichier introuvable, syntaxe) : relancer avec instructions corrigees\n  3. Si erreur complexe (logique, architecture) : escalader vers le mode -complex correspondant\n  4. Apres 2 echecs sur la meme sous-tache : arreter et rapporter dans le bilan\n\n**Etape 4 : Rapporter dans l'INTERCOM LOCAL**\n- IMPORTANT - PROTECTION DU CONTENU : Pour ecrire dans l'INTERCOM, deleguer a code-simple avec ces instructions EXACTES :\n  \"1. Lis le fichier .claude/local/INTERCOM-${MACHINE_NAME}.md en ENTIER avec read_file.\n  2. Prepare le nouveau message (format ci-dessous).\n  3. Reecris le fichier avec write_to_file en mettant le nouveau message AU DEBUT suivi d'une ligne vide puis de TOUT l'ancien contenu INTEGRAL. Ne supprime RIEN de l'ancien contenu.\"\n- NE PAS utiliser roosync_send (c'est pour inter-machines, pas local)\n- Format du nouveau message :\n  ## [{DATE}] roo -> claude-code [DONE]\n  ### Tache planifiee - Resultat\n  - Taches executees : ...\n  - Erreurs : ...\n  - Git status : propre/dirty\n  - Difficulte : SIMPLE/MOYEN/COMPLEXE\n  - Escalades effectuees : aucune / vers {mode}\n  ---\n\n**Etape 5 : Ne PAS commiter**\n- Claude Code validera le travail lors de son prochain tour\n- Ne JAMAIS git commit ou git push en mode planifie\n\n**Etape 6 : Maintenance INTERCOM (si >1000 lignes)**\n- Deleguer a code-simple : \"Lis .claude/local/INTERCOM-${MACHINE_NAME}.md. Si plus de 1000 lignes : condenser les 600 premieres en ~100 lignes (synthese des taches, decisions, metriques), garder les 400 dernieres intactes, reecrire le fichier (~500 lignes).\"\n\n### REGLES DE SECURITE\n1. Ne JAMAIS commit sans validation Claude Code\n2. Ne JAMAIS push directement\n3. Verifier git status AVANT toute modification\n4. Lire INTERCOM EN PREMIER (urgences possibles)\n5. Deleguer uniquement aux modes -simple ou -complex (jamais les natifs)\n6. Ne JAMAIS faire git checkout ou git pull dans le submodule mcps/internal/\n\n### CRITERES D'ESCALADE VERS ORCHESTRATOR-COMPLEX\n- Plus de 5 sous-taches a coordonner\n- Dependances entre sous-taches (une depend du resultat d'une autre)\n- Parallelisation requise (taches independantes a lancer simultanement)\n- Message [URGENT] dans l'INTERCOM\n- 2 echecs consecutifs sur des sous-taches simples\n- Modification de plus de 3 fichiers interconnectes\n\n### SI RIEN A FAIRE\nDeleguer l'ecriture INTERCOM avec le message :\n## [{DATE}] roo -> claude-code [IDLE]\nAucune tache planifiee. Workspace propre. En attente.\n---",
      "scheduleType": "time",
      "timeInterval": "180",
      "timeUnit": "minute",
      "selectedDays": {
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true
      },
      "startDate": "",
      "startHour": "",
      "startMinute": "00",
      "expirationDate": "",
      "expirationHour": "00",
      "expirationMinute": "00",
      "requireActivity": false,
      "active": true,
      "taskInteraction": "skip",
      "inactivityDelay": "10",
      "_template_note": "Copier vers .roo/schedules.json. Remplacer ${MACHINE_NAME} par le hostname et TEMPLATE_ID par un timestamp unique (Date.now()). timeInterval=180 (3h) en production. Ajuster startMinute selon la machine: ai-01=00, po-2023=30, po-2024=00, po-2025=30, po-2026=00, web1=30 (staggering 30min pour eviter surcharge LLM local)."
    }
  ]
}
