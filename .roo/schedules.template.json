{
  "schedules": [
    {
      "id": "TEMPLATE_ID",
      "name": "Claude-Code Assistant",
      "mode": "orchestrator-simple",
      "taskInstructions": "Tu es lance par le planificateur automatique. Suis ce workflow strictement.\n\n### WORKFLOW EN 5 ETAPES\n\n**Etape 1 : Lire l'INTERCOM**\n- Ouvre `.claude/local/INTERCOM-${MACHINE_NAME}.md`\n- Lis les 5 derniers messages\n- Cherche les messages de type [SCHEDULED] ou [TASK] de Claude Code\n- Si message [URGENT] : traiter en priorite absolue\n\n**Etape 2 : Verifier l'etat du workspace**\n- `git status` : changements non commites ?\n- Si dirty : NE PAS commiter. Signaler dans le rapport.\n- Verifier que le build fonctionne si des fichiers TypeScript ont change\n\n**Etape 3 : Executer les taches**\n- Si message [SCHEDULED] ou [TASK] : deleguer aux modes -simple\n- Si tache complexe detectee : escalader vers orchestrator-complex\n- Si rien a faire : passer a l'etape 4 directement\n\n**Etape 4 : Rapporter le resultat**\n- Ecrire un message dans l'INTERCOM avec le type [DONE] ou [ERROR]\n- Format :\n  ```\n  ## [{DATE}] roo -> claude-code [DONE]\n  ### Tache planifiee - Resultat\n  - Taches executees : ...\n  - Erreurs : ...\n  - Git status : propre/dirty\n  ```\n\n**Etape 5 : Ne PAS commiter**\n- Claude Code validera le travail lors de son prochain tour\n- Ne JAMAIS `git commit` ou `git push` en mode planifie\n- Les commits sont la responsabilite de Claude Code\n\n### REGLES DE SECURITE\n\n1. Ne JAMAIS commit sans validation Claude\n2. Ne JAMAIS push directement\n3. Verifier `git status` AVANT toute modification\n4. Lire INTERCOM EN PREMIER (urgences possibles)\n5. Deleguer uniquement aux modes `-simple` ou `-complex` (jamais les natifs)\n6. Ne JAMAIS faire `git checkout` ou `git pull` dans le submodule `mcps/internal/`\n\n### CRITERES D'ESCALADE\n\nSi l'une de ces conditions est vraie, escalader vers `orchestrator-complex` :\n- Plus de 5 sous-taches a coordonner\n- Dependances complexes entre sous-taches\n- Parallelisation requise\n- Message [URGENT] dans l'INTERCOM\n\n### SI RIEN A FAIRE\n\nEcrire dans l'INTERCOM :\n```\n## [{DATE}] roo -> claude-code [IDLE]\nAucune tache planifiee. Workspace propre. En attente.\n```\n\n### ETAPE 6 (APRES l'etape 4) : Maintenance INTERCOM\n\nVerifier le nombre de lignes du fichier INTERCOM :\n- Si le fichier depasse **1000 lignes** :\n  1. **Condenser les 600 premieres lignes en ~100 lignes** :\n     - En avant-propos : liste des taches passees (ID, date, resultat) pour vision historique\n     - Puis synthese des decisions, resultats, et lecons cles\n     - Conserver les metadonnees importantes (commits, metriques)\n  2. **Garder les 400 dernieres lignes intactes** (historique recent)\n  3. **Resultat** : fichier ~500 lignes (100 condense + 400 recent)\n  4. Mettre a jour la ligne `Derniere compaction:` avec la date du jour\n- Si moins de 1000 lignes : ne rien faire",
      "scheduleType": "time",
      "timeInterval": "180",
      "timeUnit": "minute",
      "selectedDays": {
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true
      },
      "startDate": "",
      "startHour": "",
      "startMinute": "00",
      "expirationDate": "",
      "expirationHour": "00",
      "expirationMinute": "00",
      "requireActivity": false,
      "active": true,
      "taskInteraction": "skip",
      "inactivityDelay": "10",
      "_template_note": "Copier vers .roo/schedules.json. Remplacer ${MACHINE_NAME} par le hostname et TEMPLATE_ID par un timestamp unique (Date.now()). timeInterval=180 (3h) en production. Ajuster startMinute selon la machine: ai-01=00, po-2023=30, po-2024=00, po-2025=30, po-2026=00, web1=30 (staggering 30min pour eviter surcharge LLM local)."
    }
  ]
}
